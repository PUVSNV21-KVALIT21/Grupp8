@page
@model HakimsLivs.Pages.Checkout.IndexModel

@{
    ViewData["Title"] = "Index";
}


    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hakims Livs</title>
        <link rel="stylesheet" href="Foundation.css">
    </head>

    <body>
            <form>
                <div id="middle">
                    <div id="base" style="display:block; background-color: darkseagreen">
                                        @foreach (var item in Model.ProductAmount)
                                        {
                                <table>
                                    <tbody>
                                            <tr>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <b>@item.Key.Name</b>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <b>@item.Key.Weight</b>
                                                </td>
                                                <td>
                                                    <b>@item.Key.Price</b>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <b>@item.Value.ToString()</b>
                                                </td>
                                            </tr>
                                            <tr>
                                            </tr>
                                    </tbody>
                                </table>
                                        }
                     </div>
                    <div id="sticky" style="width: 400px">
                        <h1>Receipt</h1>
                        @foreach (var item in Model.ProductAmount)
                        {
                    <div style="padding-bottom: 5px">
                        <p>@item.Key.Name</p>
                        <p>Pris sammanlagt: @((item.Key.Price * item.Value).ToString()) kr</p>
                    </div>
                        }
                            <p>Summa Totalt: @Model.amountTotal.ToString() kr</p>
                            <p>E-Post: @Model.username</p>
                    </div>
                </div>

                <nav id="top">
                    <a id="title" href="/Index">
                        <img src="~/css/HakimsLivsLogo.jpg" height="80" , width="140" />
                    </a>
                </nav>
            </form>
            <footer id="bottom">
                <button onclick="javascript:demoFromHTML();">Betala</button>
            </footer>
    </body>


@section Scripts
{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <script>
        function demoFromHTML() {
            var pdf = new jsPDF('p', 'pt', 'letter');
            // source can be HTML-formatted string, or a reference
            // to an actual DOM element from which the text will be scraped.
            source = $('#sticky')[0];

            // we support special element handlers. Register them with jQuery-style
            // ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
            // There is no support for any other type of selectors
            // (class, of compound) at this time.
            specialElementHandlers = {
                // element with id of "bypass" - jQuery style selector
                '#bypassme': function (element, renderer) {
                    // true = "handled elsewhere, bypass text extraction"
                    return true
                }
            };
            margins = {
                top: 80,
                bottom: 60,
                left: 40,
                width: 522
            };
            // all coords and widths are in jsPDF instance's declared units
            // 'inches' in this case
            pdf.fromHTML(
                source, // HTML string or DOM elem ref.
                margins.left, // x coord
                margins.top, { // y coord
                'width': margins.width, // max width of content on PDF
                'elementHandlers': specialElementHandlers
            },

                function (dispose) {
                    // dispose: object with X, Y of the last line add to the PDF
                    //          this allow the insertion of new lines after html
                    pdf.save('Receipt.pdf');
                }, margins);
        }
    </script>
}
